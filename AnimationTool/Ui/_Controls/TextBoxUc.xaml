<UserControl x:Name="Root"
             x:Class="AnimationTool.Ui._Controls.TextBoxUc"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:AnimationTool.Ui._Controls"
             mc:Ignorable="d"
             Background="{StaticResource BrushBorder3}"
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl />

    <UserControl.Resources>
        <Style TargetType="UserControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="UserControl">
                        <Border x:Name="HoverBorder" Height="40"
                                BorderThickness="0 0 0 1"
                                CornerRadius="20"
                                BorderBrush="{StaticResource BrushBorder2 }"
                                Background="Transparent" Margin="10 5 10 0">
                            <Border x:Name="SelectionBorder" Background="Transparent"
                                    CornerRadius="20">
                                <Grid Margin="20 0 0 0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <local:LabelStd Grid.Column="0" Text="{Binding Text, ElementName=Root}" />

                                    <Button x:Name="EditBtn" Grid.Column="1" Visibility="Collapsed">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border x:Name="BtnBorder"
                                                                    BorderThickness="1" Width="34" Height="34"
                                                                    CornerRadius="17" Margin="0 0 4 0"
                                                                    Background="{StaticResource BrushBorder3}"
                                                                    BorderBrush="{StaticResource BrushBorder2}">
                                                                <Path
                                                                    Data="M 24,7 L 27,11 L 13,23 L 8,24 L 10,19 L 24,7 M 24,10 L 12,20"
                                                                    Stroke="{StaticResource BrushBtnWhite}"
                                                                    StrokeThickness="1" />
                                                            </Border>

                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter TargetName="BtnBorder"
                                                                            Property="Background"
                                                                            Value="{StaticResource BrushHover}" />
                                                                </Trigger>
                                                                <Trigger Property="IsPressed" Value="True">
                                                                    <Setter TargetName="BtnBorder"
                                                                            Property="Background"
                                                                            Value="{StaticResource BrushPress}" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>

                                </Grid>
                            </Border>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="HoverBorder"
                                        Property="Background"
                                        Value="{StaticResource BrushHover}" />
                            </Trigger>
                            <DataTrigger Binding="{Binding IsSelected, ElementName=Root}" Value="True">
                                <Setter TargetName="SelectionBorder"
                                        Property="Background"
                                        Value="{StaticResource BrushHover}" />
                            </DataTrigger>

                            <DataTrigger Value="True">
                                <DataTrigger.Binding>
                                    <MultiBinding Converter="{StaticResource IsSelectedAndMouseOverConverter}">
                                        <Binding Path="IsSelected" ElementName="Root" />
                                        <Binding Path="IsMouseOver" RelativeSource="{RelativeSource Self}" />
                                    </MultiBinding>
                                </DataTrigger.Binding>
                                <Setter TargetName="EditBtn"
                                        Property="Visibility"
                                        Value="Visible" />
                            </DataTrigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>


</UserControl>